!function t(e,o,n){function a(i,l){if(!o[i]){if(!e[i]){var s="function"==typeof require&&require;if(!l&&s)return s(i,!0);if(r)return r(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var d=o[i]={exports:{}};e[i][0].call(d.exports,function(t){var o=e[i][1][t];return a(o||t)},d,d.exports,t,e,o,n)}return o[i].exports}for(var r="function"==typeof require&&require,i=0;i<n.length;i++)a(n[i]);return a}({1:[function(t,e,o){e.exports={name:"htmlcg-framework",version:"0.3.0",description:"Framework to create HTML templates for CasparCG",main:"app/index.js",scripts:{test:'echo "Error: no test specified" && exit 1'},repository:{type:"git",url:"git+https://github.com/indr/htmlcg-framework.git"},keywords:["casparcg","framework","html"],author:"Reto Inderbitzin",license:"MIT",bugs:{url:"https://github.com/indr/htmlcg-framework/issues"},homepage:"https://github.com/indr/htmlcg-framework#readme",devDependencies:{browserify:"^14.3.0",del:"^2.2.2",gulp:"^3.9.1","gulp-rename":"^1.2.2","gulp-uglify":"^2.1.2","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0"}}},{}],2:[function(t,e,o){"use strict";function n(t){return"string"!=typeof t?null:t.length<=0?null:t.match(/^</)?r(t):t.match(/^\{|\[/)?JSON.parse(t):(console.warn(TAG+"Unknown data format: "+t.substr(0,20)),null)}function a(t){if(window&&window.DOMParser&&"undefined"!=typeof XMLDocument)return(new DOMParser).parseFromString(t,"text/xml");var e=new ActiveXObject("Microsoft.XMLDOM");return e.async=!1,e.loadXML(t),e}function r(t){for(var e={},o=a(t),n=o.getElementsByTagName("componentData"),r=0;r<n.length;r++){e[n[r].id]=n[r].firstChild.attributes.value.value}return e}e.exports={parseData:n,parseXml:a,parseTemplateDataXml:r}},{}],3:[function(t,e,o){"use strict";var n={NEW:0,LOADED:1,PLAYING:2,STOPPED:4};e.exports=n},{}],4:[function(t,e,o){"use strict";function n(t){function e(){return console.debug(d+"template.load()"),c.state!==r.NEW?void console.debug(d+"Invalid state "+c.state):(c.state=r.LOADED,s.bind(c,"onLoad"))}function o(){return console.debug(d+"template.play()"),c.state!==r.LOADED&&c.state!==r.STOPPED?void console.debug(d+"Invalid state "+c.state):(c.state=r.PLAYING,s.bind(c,"onPlay"))}function n(){return console.debug(d+"template.stop()"),c.state!==r.PLAYING?void console.debug(d+"Invalid state "+c.state):(c.state=r.STOPPED,s.bind(c,"onStop"))}function i(){return console.debug(d+"template.next()"),c.state!==r.PLAYING?void console.debug(d+"Invalid state "+c.state):s.bind(c,"onNext")}function l(t){return console.debug(d+"template.update()",t),function(t){t=a.parseData(t),s.call(c,"onUpdate",t)}.bind(c,t)}function s(t,e){console.debug(d+"template."+t+"()"),c.template&&"function"==typeof c.template[t]&&c.template[t].apply(c.template,[e])}function u(t,e,o){return function(){var n=o.apply(c,arguments);n&&(e&&"function"==typeof e?e.apply(t,arguments):n())}}var d="HtmlCg/TemplateAdapter: ",c=this;return c.template=t,c.state=r.NEW,t.state=function(){return c.state},t.load=u(t,t.load,e),t.play=u(t,t.play,o),t.stop=u(t,t.stop,n),t.next=u(t,t.next,i),t.update=u(t,t.update,l),t}var a=t("./Parser"),r=t("./State");e.exports=n},{"./Parser":2,"./State":3}],5:[function(t,e,o){"use strict";e.exports=function(t,e,o,n){return function(a){function r(){c&&(l(),c=!1),e.play()}function i(){var t=s.$toolbox.find('[name="selectInvoke"]').val();e.localStorage.setItem(d+".selectInvoke",t),e.eval(t.replace(/[^a-z0-9]/gi,"")+"()")}function l(){var t=s.$toolbox.find('[name="inputUpdate"]').val();e.localStorage.setItem(d+".inputUpdate",t),e.update(t)}a=a||{},a.api=Array.isArray(a.api)?a.api:[];var s=this,u=e.location.href.substr(e.location.href.lastIndexOf("/")+1),d="htmlcg.toolbox."+u+".",c=!0;t(function(){t("body").addClass("debug"),s.$toolbox=t('<div id="htmlcg-toolbox" class="htmlcg-toolbox"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><div class="htmlcg-dialog-title">htmlcg</div></div><div class="modal-body"><table><tr><td><button type="button" name="btnPlay">Play</button></td><td><button type="button" name="btnNext">Next</button></td><td><button type="button" name="btnStop">Stop</button></td></tr><tr><td colspan="2"><select name="selectInvoke"></select></td><td><button type="button" name="btnInvoke">Invoke</button></td></tr><tr><td colspan="3"><textarea name="inputUpdate" id="htmlcg_input_update" rows="5"></textarea></td></tr><tr><td colspan="3"><button type="button" name="btnUpdate">Update</button></td></tr></table></div><div class="modal-footer"><a href="https://github.com/indr/htmlcg-framework">htmlcg-framework@'+n.version+"</a></div></div></div></div>").appendTo("body");var u=function(t){return'<option value="'+t+'">'+t+"</option>"},c=a.api.map(u);c.length>0&&c.push('<option disabled="disabled">---</option>'),c=c.concat(["play","stop","next","update"].map(u)),s.$toolbox.find('[name="selectInvoke"]').append(c.join()),s.$toolbox.find('button[name="btnPlay"]').click(r),s.$toolbox.find('button[name="btnNext"]').click(function(){e.next()}),s.$toolbox.find('button[name="btnStop"]').click(function(){e.stop()}),s.$toolbox.find('button[name="btnInvoke"]').click(i),s.$toolbox.find('button[name="btnUpdate"]').click(l),s.$toolbox.find(".htmlcg-dialog-title").text(o.title),s.$toolbox.css("top",Math.max(0,Math.min(e.innerHeight-s.$toolbox.outerHeight(),parseInt(e.localStorage.getItem(d+".top"))||Number.MAX_VALUE))),s.$toolbox.css("left",Math.max(0,Math.min(e.innerWidth-s.$toolbox.outerWidth(),parseInt(e.localStorage.getItem(d+".left"))||Number.MAX_VALUE))),s.$toolbox.find('[name="selectInvoke"]').val(e.localStorage.getItem(d+".selectInvoke"));var p=e.localStorage.getItem(d+".inputUpdate");s.$toolbox.find('[name="inputUpdate"]').val(p&&p.length>0?p:a.data),s.$toolbox.find("div.modal-header").css("cursor","move").on("mousedown",function(e){var o=s.$toolbox.addClass("draggable"),n=(o.css("z-index"),o.outerHeight()),a=o.outerWidth(),r=o.offset().top+n-e.pageY,i=o.offset().left+a-e.pageX;o.css("z-index",1e3).parents().on("mousemove",function(e){t(".draggable").offset({top:e.pageY+r-n,left:e.pageX+i-a})}),e.preventDefault()}).on("mouseup",function(){s.$toolbox.removeClass("draggable"),e.localStorage.setItem(d+".top",s.$toolbox.css("top")),e.localStorage.setItem(d+".left",s.$toolbox.css("left"))})})}}},{}],6:[function(t,e,o){"use strict";e.exports=function(e){function o(t,o){function a(e,o){console.debug(r+"window."+e+"()"),t&&"function"==typeof t[e]?t[e](o):console.warn(r+"Template function "+e+" not defined")}var r="HtmlCg/WindowAdapter: ";o=o||{},o.api=Array.isArray(o.api)?o.api:[];var i=this;t=new n(t),t.load(),["play","stop","next","update"].concat(o.api).forEach(function(t){console.debug(r+"Defining window."+t+"()"),e[t]=a.bind(i,t)})}var n=t("./TemplateAdapter");return o}},{"./TemplateAdapter":4}],7:[function(t,e,o){"use strict";e.exports=function(e,o,n,a){function r(a,r){r=r||{};var d=s.isDebug();if(console.debug("HtmlCg: Debug mode "+d),this.toolbox=null,d){var c=t("./Toolbox")(e,o,n,s);this.toolbox=new c(r)}return new u(a,r),{isDebug:d,Parser:i,State:l,toolbox:this.toolbox}}var i=t("./Parser"),l=t("./State"),s=t("./utils")(e,o,n,a),u=t("./WindowAdapter")(o);if(o&&n){var d=o.location.href.substr(o.location.href.lastIndexOf("/")+1);n.title=d+" - "+n.title}return o.HtmlCg=r,o.HtmlCg.run=function(t,e){return new r(t,e)},r}(window.jQuery||window.Zepto,window,window?window.document:void 0,navigator)},{"./Parser":2,"./State":3,"./Toolbox":5,"./WindowAdapter":6,"./utils":8}],8:[function(t,e,o){"use strict";e.exports=function(e,o,n,a){function r(){var t=!1;if(e&&o&&o.location&&n){var r=!0;a&&"string"==typeof a.userAgent&&(r=a.userAgent.indexOf("Mozilla/")>=0&&a.userAgent.indexOf("AppleWebKit/")>=0&&a.userAgent.indexOf("Chrome/")>=0&&a.userAgent.indexOf("Safari/")>=0),t=!r||"?debug"===o.location.search}return t}return{isDebug:r,version:t("../../package.json").version}}},{"../../package.json":1}]},{},[7]);