!function t(e,n,o){function a(i,l){if(!n[i]){if(!e[i]){var s="function"==typeof require&&require;if(!l&&s)return s(i,!0);if(r)return r(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[i]={exports:{}};e[i][0].call(d.exports,function(t){var n=e[i][1][t];return a(n||t)},d,d.exports,t,e,n,o)}return n[i].exports}for(var r="function"==typeof require&&require,i=0;i<o.length;i++)a(o[i]);return a}({1:[function(t,e,n){e.exports={name:"htmlcg-framework",version:"0.1.0",description:"Framework to create HTML templates for CasparCG",main:"app/index.js",scripts:{test:'echo "Error: no test specified" && exit 1'},repository:{type:"git",url:"git+https://github.com/indr/htmlcg-framework.git"},keywords:["casparcg","framework","html"],author:"Reto Inderbitzin",license:"MIT",bugs:{url:"https://github.com/indr/htmlcg-framework/issues"},homepage:"https://github.com/indr/htmlcg-framework#readme",devDependencies:{browserify:"^14.3.0",del:"^2.2.2",gulp:"^3.9.1","gulp-rename":"^1.2.2","gulp-uglify":"^2.1.2","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0"}}},{}],2:[function(t,e,n){"use strict";var o=t("../../package.json").version;e.exports=function(t,e,n,a){function r(t){function e(){return console.debug(c+"template.load()"),u.state!==g.NEW?void console.debug(c+"Invalid state "+u.state):(u.state=g.LOADED,i.bind(u,"onLoad"))}function n(){return console.debug(c+"template.play()"),u.state!==g.LOADED&&u.state!==g.STOPPED?void console.debug(c+"Invalid state "+u.state):(u.state=g.PLAYING,i.bind(u,"onPlay"))}function o(){return console.debug(c+"template.stop()"),u.state!==g.PLAYING?void console.debug(c+"Invalid state "+u.state):(u.state=g.STOPPED,i.bind(u,"onStop"))}function a(){return console.debug(c+"template.next()"),u.state!==g.PLAYING?void console.debug(c+"Invalid state "+u.state):i.bind(u,"onNext")}function r(t){return console.debug(c+"template.update()",t),function(t){t=s(t),i.call(u,"onUpdate",t)}.bind(u,t)}function i(t,e){console.debug(c+"template."+t+"()"),u.template&&"function"==typeof u.template[t]&&u.template[t].apply(u.template,[e])}function l(t,e,n){return function(){var o=n.apply(u,arguments);o&&(e&&"function"==typeof e?e.apply(t,arguments):o())}}var u=this;return u.template=t,u.state=g.NEW,t.state=function(){return u.state},t.load=l(t,t.load,e),t.play=l(t,t.play,n),t.stop=l(t,t.stop,o),t.next=l(t,t.next,a),t.update=l(t,t.update,r),t}function i(t,n){function o(e,n){console.debug(c+"window."+e+"()"),t&&"function"==typeof t[e]?t[e](n):console.warn(c+"Template function "+e+" not defined")}n=n||{},n.api=n.api||[];var a=this;t=new r(t),t.load(),["play","stop","next","update"].concat(n.api).forEach(function(t){console.debug(c+"Defining window."+t+"()"),e[t]=o.bind(a,t)})}function l(t,e){new i(t,e)}function s(t){return"string"!=typeof t?null:t.length<=0?null:t.match(/^</)?d(t):t.match(/^\{|\[/)?JSON.parse(t):(console.warn(c+"Unknown data format: "+t.substr(0,20)),null)}function u(t){if(e&&e.DOMParser&&"undefined"!=typeof XMLDocument)return(new DOMParser).parseFromString(t,"text/xml");var n=new ActiveXObject("Microsoft.XMLDOM");return n.async=!1,n.loadXML(t),n}function d(t){for(var e={},n=u(t),o=n.getElementsByTagName("componentData"),a=0;a<o.length;a++){e[o[a].id]=o[a].firstChild.attributes.value.value}return e}var c="HtmlCg: ",p=!1;if(t&&e&&e.location&&n){var f=!0;a&&"string"==typeof a.userAgent&&(console.log(c+"Navigator: "+a.userAgent),f=a.userAgent.indexOf("Mozilla/")>=0&&a.userAgent.indexOf("AppleWebKit/")>=0&&a.userAgent.indexOf("Chrome/")>=0&&a.userAgent.indexOf("Safari/")>=0),p=!f||"?debug"===e.location.search}console.debug(c+"Debug mode "+p);var g={NEW:0,LOADED:1,PLAYING:2,STOPPED:4};e.HtmlCg={run:l,parseXml:u,parseTemplateDataXml:d,State:g};var m=e.location.href.substr(e.location.href.lastIndexOf("/")+1);n.title=m+" - "+n.title+" - htmlcg "+o,p&&t(function(){t("body").addClass("debug"),console.debug(c+"Appending template control toolbox");var o=t('<div id="htmlcg-toolbox" class="htmlcg-toolbox"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><div class="htmlcg-dialog-title">htmlcg</div></div><div class="modal-body"><table><tr><td><button type="button" onclick="play()">Play</button></td><td><button type="button" onclick="next()">Next</button></td><td><button type="button" onclick="stop()">Stop</button></td></tr><tr><td colspan="2"><input type="text" id="htmlcg_input_invoke"></td><td><button type="button" onclick="(function(){ var name = $(\'#htmlcg_input_invoke\').val().replace(/[^a-z0-9]/ig, \'\'); eval(name + \'()\');}())">Invoke</button></td></tr><tr><td colspan="3"><textarea id="htmlcg_input_update" rows="5"></textarea></td></tr><tr><td colspan="3"><button type="button" onclick="update($(\'#htmlcg_input_update\').val())">Update</button></td></tr></table></div></div></div></div>').appendTo("body");o.find(".htmlcg-dialog-title").text(n.title);var a="htmlcg.toolbox.";o.css("top",Math.max(0,Math.min(e.innerHeight-o.outerHeight(),parseInt(e.localStorage.getItem(a+".top"))||Number.MAX_VALUE))),o.css("left",Math.max(0,Math.min(e.innerWidth-o.outerWidth(),parseInt(e.localStorage.getItem(a+".left"))||Number.MAX_VALUE))),o.find("div.modal-header").css("cursor","move").on("mousedown",function(e){var n=o.addClass("draggable"),a=(n.css("z-index"),n.outerHeight()),r=n.outerWidth(),i=n.offset().top+a-e.pageY,l=n.offset().left+r-e.pageX;n.css("z-index",1e3).parents().on("mousemove",function(e){t(".draggable").offset({top:e.pageY+i-a,left:e.pageX+l-r})}),e.preventDefault()}).on("mouseup",function(){o.removeClass("draggable"),e.localStorage.setItem(a+".top",o.css("top")),e.localStorage.setItem(a+".left",o.css("left"))})})}(window.jQuery||window.Zepto,window,window?window.document:void 0,navigator)},{"../../package.json":1}]},{},[2]);