!function t(e,n,o){function a(i,r){if(!n[i]){if(!e[i]){var u="function"==typeof require&&require;if(!r&&u)return u(i,!0);if(l)return l(i,!0);var d=new Error("Cannot find module '"+i+"'");throw d.code="MODULE_NOT_FOUND",d}var s=n[i]={exports:{}};e[i][0].call(s.exports,function(t){var n=e[i][1][t];return a(n||t)},s,s.exports,t,e,n,o)}return n[i].exports}for(var l="function"==typeof require&&require,i=0;i<o.length;i++)a(o[i]);return a}({1:[function(t,e,n){"use strict";e.exports=function(t,e,n,o){function a(t){function e(){return console.debug(s+"template.load()"),d.state!==f.NEW?void console.debug(s+"Invalid state "+d.state):(d.state=f.LOADED,i.bind(d,"onLoad"))}function n(){return console.debug(s+"template.play()"),d.state!==f.LOADED&&d.state!==f.STOPPED?void console.debug(s+"Invalid state "+d.state):(d.state=f.PLAYING,i.bind(d,"onPlay"))}function o(){return console.debug(s+"template.stop()"),d.state!==f.PLAYING?void console.debug(s+"Invalid state "+d.state):(d.state=f.STOPPED,i.bind(d,"onStop"))}function a(){return console.debug(s+"template.next()"),d.state!==f.PLAYING?void console.debug(s+"Invalid state "+d.state):i.bind(d,"onNext")}function l(t){return console.debug(s+"template.update()",t),function(t){t=r(t),i.call(d,"onUpdate",t)}.bind(d,t)}function i(t,e){console.debug(s+"template."+t+"()"),d.template&&"function"==typeof d.template[t]&&d.template[t].apply(d.template,[e])}function u(t,e,n){return function(){var o=n.apply(d,arguments);o&&(e&&"function"==typeof e?e.apply(t,arguments):o())}}var d=this;return d.template=t,d.state=f.NEW,t.state=function(){return d.state},t.load=u(t,t.load,e),t.play=u(t,t.play,n),t.stop=u(t,t.stop,o),t.next=u(t,t.next,a),t.update=u(t,t.update,l),t}function l(t,n){function o(e,n){console.debug(s+"window."+e+"()"),t&&"function"==typeof t[e]?t[e](n):console.warn(s+"Template function "+e+" not defined")}n=n||{},n.api=n.api||[];var l=this;t=new a(t),t.load(),["play","stop","next","update"].concat(n.api).forEach(function(t){console.debug(s+"Defining window."+t+"()"),e[t]=o.bind(l,t)})}function i(t,e){new l(t,e)}function r(t){return"string"!=typeof t?null:t.length<=0?null:t.match(/^</)?d(t):t.match(/^\{|\[/)?JSON.parse(t):(console.warn(s+"Unknown data format: "+t.substr(0,20)),null)}function u(t){if(e&&e.DOMParser&&"undefined"!=typeof XMLDocument)return(new DOMParser).parseFromString(t,"text/xml");var n=new ActiveXObject("Microsoft.XMLDOM");return n.async=!1,n.loadXML(t),n}function d(t){for(var e={},n=u(t),o=n.getElementsByTagName("componentData"),a=0;a<o.length;a++){e[o[a].id]=o[a].firstChild.attributes.value.value}return e}var s="HtmlCg: ",c=!1;if(t&&e&&e.location&&n){var p=!0;o&&"string"==typeof o.userAgent&&(console.log(s+"Navigator: "+o.userAgent),p=o.userAgent.indexOf("Mozilla/")>=0&&o.userAgent.indexOf("AppleWebKit/")>=0&&o.userAgent.indexOf("Chrome/")>=0&&o.userAgent.indexOf("Safari/")>=0),c=!p||"?debug"===e.location.search}console.debug(s+"Debug mode "+c);var f={NEW:0,LOADED:1,PLAYING:2,STOPPED:4};e.HtmlCg={run:i,parseXml:u,parseTemplateDataXml:d,State:f},c&&t(function(){t("body").addClass("debug"),console.debug(s+"Appending template control toolbox");var n=t('<div id="htmlcg-toolbox" class="htmlcg-toolbox"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><div class="htmlcg-dialog-title">HtmlCg - Template Control</div></div><div class="modal-body"><table><tr><td><button type="button" onclick="play()">Play</button></td><td><button type="button" onclick="next()">Next</button></td><td><button type="button" onclick="stop()">Stop</button></td></tr><tr><td colspan="2"><input type="text" id="htmlcg_input_invoke"></td><td><button type="button" onclick="(function(){ var name = $(\'#htmlcg_input_invoke\').val().replace(/[^a-z0-9]/ig, \'\'); eval(name + \'()\');}())">Invoke</button></td></tr><tr><td colspan="3"><textarea id="htmlcg_input_update" rows="5"></textarea></td></tr><tr><td colspan="3"><button type="button" onclick="update($(\'#htmlcg_input_update\').val())">Update</button></td></tr></table></div></div></div></div>').appendTo("body"),o="htmlcg.toolbox.";n.css("top",Math.max(0,Math.min(e.innerHeight-n.outerHeight(),parseInt(e.localStorage.getItem(o+".top"))||Number.MAX_VALUE))),n.css("left",Math.max(0,Math.min(e.innerWidth-n.outerWidth(),parseInt(e.localStorage.getItem(o+".left"))||Number.MAX_VALUE))),n.find("div.modal-header").css("cursor","move").on("mousedown",function(e){var o=n.addClass("draggable"),a=(o.css("z-index"),o.outerHeight()),l=o.outerWidth(),i=o.offset().top+a-e.pageY,r=o.offset().left+l-e.pageX;o.css("z-index",1e3).parents().on("mousemove",function(e){t(".draggable").offset({top:e.pageY+i-a,left:e.pageX+r-l})}),e.preventDefault()}).on("mouseup",function(){n.removeClass("draggable"),e.localStorage.setItem(o+".top",n.css("top")),e.localStorage.setItem(o+".left",n.css("left"))})})}(window.jQuery||window.Zepto,window,window?window.document:void 0,navigator)},{}]},{},[1]);