!function t(e,n,o){function a(i,s){if(!n[i]){if(!e[i]){var l="function"==typeof require&&require;if(!s&&l)return l(i,!0);if(r)return r(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[i]={exports:{}};e[i][0].call(c.exports,function(t){var n=e[i][1][t];return a(n||t)},c,c.exports,t,e,n,o)}return n[i].exports}for(var r="function"==typeof require&&require,i=0;i<o.length;i++)a(o[i]);return a}({1:[function(t,e,n){e.exports={name:"htmlcg-framework",version:"0.1.0",description:"Framework to create HTML templates for CasparCG",main:"app/index.js",scripts:{test:'echo "Error: no test specified" && exit 1'},repository:{type:"git",url:"git+https://github.com/indr/htmlcg-framework.git"},keywords:["casparcg","framework","html"],author:"Reto Inderbitzin",license:"MIT",bugs:{url:"https://github.com/indr/htmlcg-framework/issues"},homepage:"https://github.com/indr/htmlcg-framework#readme",devDependencies:{browserify:"^14.3.0",del:"^2.2.2",gulp:"^3.9.1","gulp-rename":"^1.2.2","gulp-uglify":"^2.1.2","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0"}}},{}],2:[function(t,e,n){"use strict";function o(t){return"string"!=typeof t?null:t.length<=0?null:t.match(/^</)?r(t):t.match(/^\{|\[/)?JSON.parse(t):(console.warn(TAG+"Unknown data format: "+t.substr(0,20)),null)}function a(t){if(window&&window.DOMParser&&"undefined"!=typeof XMLDocument)return(new DOMParser).parseFromString(t,"text/xml");var e=new ActiveXObject("Microsoft.XMLDOM");return e.async=!1,e.loadXML(t),e}function r(t){for(var e={},n=a(t),o=n.getElementsByTagName("componentData"),r=0;r<o.length;r++){e[o[r].id]=o[r].firstChild.attributes.value.value}return e}e.exports={parseData:o,parseXml:a,parseTemplateDataXml:r}},{}],3:[function(t,e,n){"use strict";var o={NEW:0,LOADED:1,PLAYING:2,STOPPED:4};e.exports=o},{}],4:[function(t,e,n){"use strict";function o(t){function e(){return console.debug(c+"template.load()"),d.state!==r.NEW?void console.debug(c+"Invalid state "+d.state):(d.state=r.LOADED,l.bind(d,"onLoad"))}function n(){return console.debug(c+"template.play()"),d.state!==r.LOADED&&d.state!==r.STOPPED?void console.debug(c+"Invalid state "+d.state):(d.state=r.PLAYING,l.bind(d,"onPlay"))}function o(){return console.debug(c+"template.stop()"),d.state!==r.PLAYING?void console.debug(c+"Invalid state "+d.state):(d.state=r.STOPPED,l.bind(d,"onStop"))}function i(){return console.debug(c+"template.next()"),d.state!==r.PLAYING?void console.debug(c+"Invalid state "+d.state):l.bind(d,"onNext")}function s(t){return console.debug(c+"template.update()",t),function(t){t=a.parseData(t),l.call(d,"onUpdate",t)}.bind(d,t)}function l(t,e){console.debug(c+"template."+t+"()"),d.template&&"function"==typeof d.template[t]&&d.template[t].apply(d.template,[e])}function u(t,e,n){return function(){var o=n.apply(d,arguments);o&&(e&&"function"==typeof e?e.apply(t,arguments):o())}}var c="HtmlCg/TemplateAdapter: ",d=this;return d.template=t,d.state=r.NEW,t.state=function(){return d.state},t.load=u(t,t.load,e),t.play=u(t,t.play,n),t.stop=u(t,t.stop,o),t.next=u(t,t.next,i),t.update=u(t,t.update,s),t}var a=t("./Parser"),r=t("./State");e.exports=o},{"./Parser":2,"./State":3}],5:[function(t,e,n){"use strict";e.exports=function(t,e,n){return function(){t(function(){t("body").addClass("debug");var o=t('<div id="htmlcg-toolbox" class="htmlcg-toolbox"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><div class="htmlcg-dialog-title">htmlcg</div></div><div class="modal-body"><table><tr><td><button type="button" onclick="play()">Play</button></td><td><button type="button" onclick="next()">Next</button></td><td><button type="button" onclick="stop()">Stop</button></td></tr><tr><td colspan="2"><input type="text" id="htmlcg_input_invoke"></td><td><button type="button" onclick="(function(){ var name = $(\'#htmlcg_input_invoke\').val().replace(/[^a-z0-9]/ig, \'\'); eval(name + \'()\');}())">Invoke</button></td></tr><tr><td colspan="3"><textarea id="htmlcg_input_update" rows="5"></textarea></td></tr><tr><td colspan="3"><button type="button" onclick="update($(\'#htmlcg_input_update\').val())">Update</button></td></tr></table></div></div></div></div>').appendTo("body");o.find(".htmlcg-dialog-title").text(n.title);var a="htmlcg.toolbox.";o.css("top",Math.max(0,Math.min(e.innerHeight-o.outerHeight(),parseInt(e.localStorage.getItem(a+".top"))||Number.MAX_VALUE))),o.css("left",Math.max(0,Math.min(e.innerWidth-o.outerWidth(),parseInt(e.localStorage.getItem(a+".left"))||Number.MAX_VALUE))),o.find("div.modal-header").css("cursor","move").on("mousedown",function(e){var n=o.addClass("draggable"),a=(n.css("z-index"),n.outerHeight()),r=n.outerWidth(),i=n.offset().top+a-e.pageY,s=n.offset().left+r-e.pageX;n.css("z-index",1e3).parents().on("mousemove",function(e){t(".draggable").offset({top:e.pageY+i-a,left:e.pageX+s-r})}),e.preventDefault()}).on("mouseup",function(){o.removeClass("draggable"),e.localStorage.setItem(a+".top",o.css("top")),e.localStorage.setItem(a+".left",o.css("left"))})})}}},{}],6:[function(t,e,n){"use strict";e.exports=function(e){function n(t,n){function a(e,n){console.debug(r+"window."+e+"()"),t&&"function"==typeof t[e]?t[e](n):console.warn(r+"Template function "+e+" not defined")}var r="HtmlCg/WindowAdapter: ";n=n||{},n.api=n.api||[];var i=this;t=new o(t),t.load(),["play","stop","next","update"].concat(n.api).forEach(function(t){console.debug(r+"Defining window."+t+"()"),e[t]=a.bind(i,t)})}var o=t("./TemplateAdapter");return n}},{"./TemplateAdapter":4}],7:[function(t,e,n){"use strict";e.exports=function(e,n,o,a){function r(t,e){new u(t,e)}var i=t("./Parser"),s=t("./State"),l=t("./utils")(e,n,o,a),u=t("./WindowAdapter")(n),c=l.isDebug();if(console.debug("HtmlCg: Debug mode "+c),n&&o){var d=n.location.href.substr(n.location.href.lastIndexOf("/")+1);o.title=d+" - "+o.title+" - htmlcg "+l.version}var p=null;if(c){p=new(t("./Toolbox")(e,n,o))}return n.HtmlCg={isDebug:c,run:r,Parser:i,State:s,toolbox:p},n.HtmlCg}(window.jQuery||window.Zepto,window,window?window.document:void 0,navigator)},{"./Parser":2,"./State":3,"./Toolbox":5,"./WindowAdapter":6,"./utils":8}],8:[function(t,e,n){"use strict";e.exports=function(e,n,o,a){function r(){var t=!1;if(e&&n&&n.location&&o){var r=!0;a&&"string"==typeof a.userAgent&&(r=a.userAgent.indexOf("Mozilla/")>=0&&a.userAgent.indexOf("AppleWebKit/")>=0&&a.userAgent.indexOf("Chrome/")>=0&&a.userAgent.indexOf("Safari/")>=0),t=!r||"?debug"===n.location.search}return t}return{isDebug:r,version:t("../../package.json").version}}},{"../../package.json":1}]},{},[7]);