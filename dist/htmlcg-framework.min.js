!function r(i,l,s){function u(e,t){if(!l[e]){if(!i[e]){var o="function"==typeof require&&require;if(!t&&o)return o(e,!0);if(c)return c(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var a=l[e]={exports:{}};i[e][0].call(a.exports,function(t){return u(i[e][1][t]||t)},a,a.exports,r,i,l,s)}return l[e].exports}for(var c="function"==typeof require&&require,t=0;t<s.length;t++)u(s[t]);return u}({1:[function(t,e,o){e.exports={name:"htmlcg-framework",version:"0.3.1",description:"Framework to create HTML templates for CasparCG",main:"app/index.js",scripts:{test:'echo "Error: no test specified" && exit 1'},repository:{type:"git",url:"git+https://github.com/indr/htmlcg-framework.git"},keywords:["casparcg","framework","html"],author:"Reto Inderbitzin",license:"MIT",bugs:{url:"https://github.com/indr/htmlcg-framework/issues"},homepage:"https://github.com/indr/htmlcg-framework#readme",devDependencies:{browserify:"^16.2.2",del:"^3.0.0",gulp:"^3.9.1","gulp-rename":"^1.2.2","gulp-uglify":"^3.0.0","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^2.0.0"}}},{}],2:[function(t,e,o){"use strict";function a(t){if(window&&window.DOMParser&&"undefined"!=typeof XMLDocument)return(new DOMParser).parseFromString(t,"text/xml");var e=new ActiveXObject("Microsoft.XMLDOM");return e.async=!1,e.loadXML(t),e}function n(t){for(var e={},o=a(t).getElementsByTagName("componentData"),n=0;n<o.length;n++){e[o[n].id]=o[n].firstChild.attributes.value.value}return e}e.exports={parseData:function(t){return"string"!=typeof t?null:t.length<=0?null:t.match(/^</)?n(t):t.match(/^\{|\[/)?JSON.parse(t):(console.warn(TAG+"Unknown data format: "+t.substr(0,20)),null)},parseXml:a,parseTemplateDataXml:n}},{}],3:[function(t,e,o){"use strict";e.exports={NEW:0,LOADED:1,PLAYING:2,STOPPED:4}},{}],4:[function(t,e,o){"use strict";var r=t("./Parser"),i=t("./State");e.exports=function(t){var o="HtmlCg/TemplateAdapter: ",a=this;function e(t,e){console.debug(o+"template."+t+"()"),a.template&&"function"==typeof a.template[t]&&a.template[t].apply(a.template,[e])}function n(e,o,n){return function(){var t=n.apply(a,arguments);t&&(o&&"function"==typeof o?o.apply(e,arguments):t())}}return a.template=t,a.state=i.NEW,t.state=function(){return a.state},t.load=n(t,t.load,function(){if(console.debug(o+"template.load()"),a.state===i.NEW)return a.state=i.LOADED,e.bind(a,"onLoad");console.debug(o+"Invalid state "+a.state)}),t.play=n(t,t.play,function(){if(console.debug(o+"template.play()"),a.state===i.LOADED||a.state===i.STOPPED)return a.state=i.PLAYING,e.bind(a,"onPlay");console.debug(o+"Invalid state "+a.state)}),t.stop=n(t,t.stop,function(){if(console.debug(o+"template.stop()"),a.state===i.PLAYING)return a.state=i.STOPPED,e.bind(a,"onStop");console.debug(o+"Invalid state "+a.state)}),t.next=n(t,t.next,function(){if(console.debug(o+"template.next()"),a.state===i.PLAYING)return e.bind(a,"onNext");console.debug(o+"Invalid state "+a.state)}),t.update=n(t,t.update,function(t){return console.debug(o+"template.update()",t),function(t){t="object"==typeof t?t:r.parseData(t),e.call(a,"onUpdate",t||{})}.bind(a,t)}),t}},{"./Parser":2,"./State":3}],5:[function(t,e,o){"use strict";e.exports=function(u,c,d,p){return function(n){(n=n||{}).api=Array.isArray(n.api)?n.api:[];var i=this,a="htmlcg.toolbox."+c.location.href.substr(c.location.href.lastIndexOf("/")+1)+".",t=!0;function r(){t&&(s(),t=!1),c.play()}function l(){var t=i.$toolbox.find('[name="selectInvoke"]').val();c.localStorage.setItem(a+".selectInvoke",t),c.eval(t.replace(/[^a-z0-9]/gi,"")+"()")}function s(){var t=i.$toolbox.find('[name="inputUpdate"]').val();c.localStorage.setItem(a+".inputUpdate",t),c.update(t)}u(function(){u("body").addClass("debug"),i.$toolbox=u('<div id="htmlcg-toolbox" class="htmlcg-toolbox"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><div class="htmlcg-dialog-title">htmlcg</div></div><div class="modal-body"><table><tr><td><button type="button" name="btnPlay">Play</button></td><td><button type="button" name="btnNext">Next</button></td><td><button type="button" name="btnStop">Stop</button></td></tr><tr><td colspan="2"><select name="selectInvoke"></select></td><td><button type="button" name="btnInvoke">Invoke</button></td></tr><tr><td colspan="3"><textarea name="inputUpdate" id="htmlcg_input_update" rows="5"></textarea></td></tr><tr><td colspan="3"><button type="button" name="btnUpdate">Update</button></td></tr></table></div><div class="modal-footer"><a href="https://github.com/indr/htmlcg-framework">htmlcg-framework@'+p.version+"</a></div></div></div></div>").appendTo("body");var t=function(t){return'<option value="'+t+'">'+t+"</option>"},e=n.api.map(t);0<e.length&&e.push('<option disabled="disabled">---</option>'),e=e.concat(["play","stop","next","update"].map(t)),i.$toolbox.find('[name="selectInvoke"]').append(e.join()),i.$toolbox.find('button[name="btnPlay"]').click(r),i.$toolbox.find('button[name="btnNext"]').click(function(){c.next()}),i.$toolbox.find('button[name="btnStop"]').click(function(){c.stop()}),i.$toolbox.find('button[name="btnInvoke"]').click(l),i.$toolbox.find('button[name="btnUpdate"]').click(s),i.$toolbox.find(".htmlcg-dialog-title").text(d.title),i.$toolbox.css("top",Math.max(0,Math.min(c.innerHeight-i.$toolbox.outerHeight(),parseInt(c.localStorage.getItem(a+".top"))||Number.MAX_VALUE))),i.$toolbox.css("left",Math.max(0,Math.min(c.innerWidth-i.$toolbox.outerWidth(),parseInt(c.localStorage.getItem(a+".left"))||Number.MAX_VALUE))),i.$toolbox.find('[name="selectInvoke"]').val(c.localStorage.getItem(a+".selectInvoke"));var o=c.localStorage.getItem(a+".inputUpdate");i.$toolbox.find('[name="inputUpdate"]').val(o&&0<o.length?o:n.data),i.$toolbox.find("div.modal-header").css("cursor","move").on("mousedown",function(t){var e=i.$toolbox.addClass("draggable"),o=(e.css("z-index"),e.outerHeight()),n=e.outerWidth(),a=e.offset().top+o-t.pageY,r=e.offset().left+n-t.pageX;e.css("z-index",1e3).parents().on("mousemove",function(t){u(".draggable").offset({top:t.pageY+a-o,left:t.pageX+r-n})}),t.preventDefault()}).on("mouseup",function(){i.$toolbox.removeClass("draggable"),c.localStorage.setItem(a+".top",i.$toolbox.css("top")),c.localStorage.setItem(a+".left",i.$toolbox.css("left"))})})}}},{}],6:[function(t,e,o){"use strict";e.exports=function(a){var r=t("./TemplateAdapter");return function(o,t){var n="HtmlCg/WindowAdapter: ";(t=t||{}).api=Array.isArray(t.api)?t.api:[];var e=this;(o=new r(o)).load(),["play","stop","next","update"].concat(t.api).forEach(function(t){console.debug(n+"Defining window."+t+"()"),a[t]=function(t,e){console.debug(n+"window."+t+"()"),o&&"function"==typeof o[t]?o[t](e):console.warn(n+"Template function "+t+" not defined")}.bind(e,t)})}}},{"./TemplateAdapter":4}],7:[function(d,t,e){"use strict";t.exports=function(a,r,i){var l=d("./Parser"),s=d("./State"),u=d("./utils")(a,r),c=d("./WindowAdapter")(r);if(r&&i){var t=r.location.href.substr(r.location.href.lastIndexOf("/")+1);i.title=t+" - "+i.title}function o(t,e){e=e||{};var o=u.isDebug();if(console.debug("HtmlCg: Debug mode "+o),this.toolbox=null,o){var n=d("./Toolbox")(a,r,i,u);this.toolbox=new n(e)}return new c(t,e),{isDebug:o,Parser:l,State:s,toolbox:this.toolbox}}return r.HtmlCg=o,r.HtmlCg.run=function(t,e){return new o(t,e)},o}(window.jQuery||window.Zepto,window,window?window.document:void 0)},{"./Parser":2,"./State":3,"./Toolbox":5,"./WindowAdapter":6,"./utils":8}],8:[function(o,t,e){"use strict";t.exports=function(t,e){return{isDebug:function(){return e&&e.location&&"true"===(e.location.search.match(/[?&]debug=([^&$]+)/)||[])[1]},version:o("../../package.json").version}}},{"../../package.json":1}]},{},[7]);